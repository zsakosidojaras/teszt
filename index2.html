<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7 napos el≈ërejelz√©s</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        #weather { margin-top: 20px; font-size: 1.2em; }
        .day { border: 1px solid #ccc; padding: 10px; margin: 10px; display: inline-block; width: 150px; border-radius: 10px; background: #f9f9f9; }
    </style>
</head>
<body>
    <h1>5 napos id≈ëj√°r√°s el≈ërejelz√©s</h1>
    <input type="text" id="city" placeholder="√çrd be a v√°rost" value="Budapest">
    <button onclick="getWeather()">Keres√©s</button>
    
    <div id="weather"></div>

    <script>
        async function getWeather() {
            const apiKey = "e87eb95d5af785c8fa75755fbfa8788b"; 
            const city = document.getElementById("city").value || "Budapest";
            const url = `https://api.openweathermap.org/data/2.5/forecast?q=${city}&appid=${apiKey}&units=metric&lang=hu`;

            try {
                const response = await fetch(url);
                const data = await response.json();

                if (data.cod !== "200") {
                    throw new Error(data.message);
                }

                const forecastData = processForecastData(data.list);
                displayForecast(forecastData, data.city.name);
            } catch (error) {
                document.getElementById("weather").innerHTML = `<p>Hiba: ${error.message}</p>`;
            }
        }

        function processForecastData(list) {
            const dailyData = {};
            list.forEach(entry => {
                const date = entry.dt_txt.split(" ")[0];
                if (!dailyData[date]) {
                    dailyData[date] = {
                        temps: [],
                        description: entry.weather[0].description,
                        icon: entry.weather[0].icon
                    };
                }
                dailyData[date].temps.push(entry.main.temp);
            });

            return Object.keys(dailyData).slice(0, 5).map(date => {
                const temps = dailyData[date].temps;
                return {
                    date,
                    tempMin: Math.min(...temps).toFixed(1),
                    tempMax: Math.max(...temps).toFixed(1),
                    description: dailyData[date].description,
                    icon: dailyData[date].icon
                };
            });
        }

        function displayForecast(forecastData, cityName) {
            let html = `<h2>${cityName} id≈ëj√°r√°sa</h2>`;
            forecastData.forEach(day => {
                html += `
                    <div class="day">
                        <h3>${day.date}</h3>
                        <img src="https://openweathermap.org/img/wn/${day.icon}.png" alt="${day.description}">
                        <p>${day.description}</p>
                        <p>üå° ${day.tempMin}¬∞C - ${day.tempMax}¬∞C</p>
                    </div>
                `;
            });
            document.getElementById("weather").innerHTML = html;
        }
    </script>
</body>
</html>
